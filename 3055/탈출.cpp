#include <iostream>
#include <queue>
using namespace std;

struct Info {
	int row;
	int col;
	int dist;
	bool isWater;
};
int R, C;
char grid[51][51];
queue<Info> pos;
bool isVisited[51][51];
int movement[4][2] = { {0,1},{1,0},{0,-1},{-1,0} };
int BFS(int startR,int startC, int endR, int endC) {
	pos.push({ startR, startC, 0, false });
	isVisited[startR][startC] = true;

	int nowR, nowC, dist, isWater;
	int newR, newC;
	while (!pos.empty()) {
		nowR = pos.front().row;
		nowC = pos.front().col;
		dist = pos.front().dist;
		isWater = pos.front().isWater;
		pos.pop();

		if (!isWater && nowR == endR && nowC == endC) return dist;
		for (int i = 0; i < 4; i++) {
			newR = nowR + movement[i][0];
			newC = nowC + movement[i][1];

			if (newR > R || newC > C || newR < 1 || newC < 1) continue;
			if (grid[newR][newC] == 'X') continue;
			if (isVisited[newR][newC]) continue;
			if (isWater) {
				if (grid[newR][newC] == 'D') continue;
				pos.push({ newR, newC, 0, true });
				isVisited[newR][newC] = true;
			}
			else {
				pos.push({ newR,newC, dist + 1,false });
				isVisited[newR][newC] = true;
			}
		}
	}
	return -1;
}
int main() {
	cin >> R >> C;
	int startR, startC;
	int endR, endC;
	for (int i = 1; i <= R; i++) {
		for (int j = 1; j <= C; j++) {
			cin >> grid[i][j];
			if (grid[i][j] == 'S') {
				startR = i;
				startC = j;
			}
			else if (grid[i][j] == 'D') {
				endR = i;
				endC = j;
			}
			else if (grid[i][j] == '*') pos.push({ i, j, 0, true });
		}
	}
	int answer = BFS(startR, startC, endR, endC);
	if (answer == -1)cout << "KAKTUS";
	else cout << answer;
}
/*
50 50
..................................................
............................................XXXXD.
...............................................XXX
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
................................S.................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..................................................
..............................................*...
..................................................
..................................................
..................................................
 = 44
*/